<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="BCxS4BjJYARXVYW3XUNGoFXtHimMMOMHzchkfIWFhS4" />










  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Python,学习,笔记," />








  <link rel="shortcut icon" type="image/x-icon" href="/smile_Doraemon.ico?v=0.5.0" />






<meta name="description" content="目录
函数1.1 函数调用1.2 函数定义1.3 空函数1.4 参数检查1.5 返回多个返回值1.6 函数的参数
高级特性2.1 切片2.2 迭代2.3 列表生成式2.4 生成器
函数式编程3.1 高阶函数3.2 返回函数3.3 匿名函数3.4 装饰器3.5 偏函数


1. 函数 .1 函数调用 Python中内置了许多函数，在python程序中我们可以直接通过函数名调用，例如: abs,c">
<meta property="og:type" content="article">
<meta property="og:title" content="Python 学习笔记（2）">
<meta property="og:url" content="http://woshijpf.github.io/2015/07/20/Python学习笔记（2）/index.html">
<meta property="og:site_name" content="woshijpf's blog">
<meta property="og:description" content="目录
函数1.1 函数调用1.2 函数定义1.3 空函数1.4 参数检查1.5 返回多个返回值1.6 函数的参数
高级特性2.1 切片2.2 迭代2.3 列表生成式2.4 生成器
函数式编程3.1 高阶函数3.2 返回函数3.3 匿名函数3.4 装饰器3.5 偏函数


1. 函数 .1 函数调用 Python中内置了许多函数，在python程序中我们可以直接通过函数名调用，例如: abs,c">
<meta property="og:image" content="http://7xj51c.com1.z0.glb.clouddn.com/python_logo.png">
<meta property="og:image" content="http://7xj51c.com1.z0.glb.clouddn.com/decorator_analysis_process.png">
<meta property="og:image" content="http://7xj51c.com1.z0.glb.clouddn.com/decorator_analysis_process2.png">
<meta property="og:updated_time" content="2016-03-09T06:17:50.988Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Python 学习笔记（2）">
<meta name="twitter:description" content="目录
函数1.1 函数调用1.2 函数定义1.3 空函数1.4 参数检查1.5 返回多个返回值1.6 函数的参数
高级特性2.1 切片2.2 迭代2.3 列表生成式2.4 生成器
函数式编程3.1 高阶函数3.2 返回函数3.3 匿名函数3.4 装饰器3.5 偏函数


1. 函数 .1 函数调用 Python中内置了许多函数，在python程序中我们可以直接通过函数名调用，例如: abs,c">
<meta name="twitter:image" content="http://7xj51c.com1.z0.glb.clouddn.com/python_logo.png">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> Python 学习笔记（2） | woshijpf's blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-63075912-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?918348754b933e7ef9176e5e0720b4f7";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>






  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">woshijpf's blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="st-search-show-outputs">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'TG4h5bcA6H_tjQY9KK_w','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Python 学习笔记（2）
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-07-20T22:09:56+08:00" content="2015-07-20">
              2015-07-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/07/20/Python学习笔记（2）/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/20/Python学习笔记（2）/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><img src="http://7xj51c.com1.z0.glb.clouddn.com/python_logo.png" alt="python_logo"></p>
<blockquote>
<h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><ol>
<li><a href="#1">函数</a><br>1.1 <a href="#1.1">函数调用</a><br>1.2 <a href="#1.2">函数定义</a><br>1.3 <a href="#1.3">空函数</a><br>1.4 <a href="#1.4">参数检查</a><br>1.5 <a href="#1.5">返回多个返回值</a><br>1.6 <a href="#1.6">函数的参数</a></li>
<li><a href="#2">高级特性</a><br>2.1 <a href="#2.1">切片</a><br>2.2 <a href="#2.2">迭代</a><br>2.3 <a href="#2.3">列表生成式</a><br>2.4 <a href="#2.4">生成器</a></li>
<li><a href="#3">函数式编程</a><br>3.1 <a href="#3.1">高阶函数</a><br>3.2 <a href="#3.2">返回函数</a><br>3.3 <a href="#3.3">匿名函数</a><br>3.4 <a href="#3.4">装饰器</a><br>3.5 <a href="#3.5">偏函数</a></li>
</ol>
</blockquote>
<h2 id="1-函数"><a href="#1-函数" class="headerlink" title="1. 函数 "></a>1. 函数 <span id="1"></span></h2><h3 id="1-函数调用"><a href="#1-函数调用" class="headerlink" title=".1 函数调用 "></a>.1 函数调用 <span id="1.1"></span></h3><p>Python中内置了许多函数，在python程序中我们可以直接通过函数名调用，例如: abs,chr,ord等等。我们也可以从Python的官方文档中查看到内置函数的具体信息:<a href="https://docs.python.org/2/library/functions.html#abs" target="_blank" rel="external">https://docs.python.org/2/library/functions.html#abs</a></p>
<p>Python中函数的函数名其实本质上是一个指向函数对象的引用，完全可以把函数名赋值给一个变量，这相当于给函数换了个“别名”，例如:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = abs</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a(<span class="number">-1</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a(<span class="number">100</span>)</span><br><span class="line"><span class="number">100</span></span><br></pre></td></tr></table></figure></p>
<a id="more"></a>
<p>在使用Python中内置的函数时，需要根据函数的参数定义，传入合适的参数。</p>
<h3 id="1-2-函数定义"><a href="#1-2-函数定义" class="headerlink" title="1.2 函数定义 "></a>1.2 函数定义 <span id="1.2"></span></h3><p>在Python中，定义一个函数需要使用def语句，依次写出函数名、括号、括号中的参数和冒号“:“，然后在缩进块中编写函数体，函数的返回值用return语句返回，下面就以自定义的求绝对值函数my_abs为例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_abs</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> x &gt;= <span class="number">0</span>:</span><br><span class="line">    	<span class="keyword">return</span> x</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">    	<span class="keyword">return</span> -x</span><br></pre></td></tr></table></figure></p>
<h3 id="1-3-空函数"><a href="#1-3-空函数" class="headerlink" title="1.3 空函数 "></a>1.3 空函数 <span id="1.3"></span></h3><p>如果想定义一个什么也不做的空函数，可以采用<strong>pass</strong>语句:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">nop</span><span class="params">()</span>:</span></span><br><span class="line">	<span class="keyword">pass</span></span><br></pre></td></tr></table></figure></p>
<p>pass语句什么也不做，实际上pass可以用来作为占位符，比如现在还没想好怎么写函数的代码，就可以先放一个pass，让代码能运行起来。</p>
<h3 id="1-4-参数检查"><a href="#1-4-参数检查" class="headerlink" title="1.4 参数检查 "></a>1.4 参数检查 <span id="1.4"></span></h3><p>Python解释器可以检查我们调用自定义函数时的<strong>参数的个数</strong>是否正确，但它不会检查我们调用函数时函数参数的类型是否正确，所以我们在自定义函数时，最好还要添加上参数类型检查。</p>
<p>在Python的内置函数中有一个函数叫做isinstance()，这个函数是用来判断一个变量是否是某种类型数据的实例，例如我们将上面的my_abs函数进行该进，为其添加上参数检查功能:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_abs</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> isinstance(x,(int,float)):</span><br><span class="line">    	<span class="keyword">raise</span> TypeError(<span class="string">'bad operand type'</span>)</span><br><span class="line">    <span class="keyword">if</span> x &gt;= <span class="number">0</span>:</span><br><span class="line">    	<span class="keyword">return</span> x</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">    	<span class="keyword">return</span> -x</span><br></pre></td></tr></table></figure></p>
<h3 id="1-5-返回多个返回值"><a href="#1-5-返回多个返回值" class="headerlink" title="1.5 返回多个返回值 "></a>1.5 返回多个返回值 <span id="1.5"></span></h3><p>在Python中支持返回多个返回值，看起来这与我们以前C语言中一个函数只能返回一个返回值有很大的不同啊？但是，实际上呢，Python中函数返回多个函数值，其实本质上是将多个返回值，组成一个tuple类型的数据返回，所以，本质上函数的返回值还是一个。<br>例如:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">move</span><span class="params">(x,y,step,angle=<span class="number">0</span>)</span>:</span></span><br><span class="line">    nx = x + step*math.cos(angle)</span><br><span class="line">    ny = y + step*math.sin(angle)</span><br><span class="line">    <span class="keyword">return</span> nx,ny</span><br><span class="line"></span><br><span class="line">x,y = move(<span class="number">100</span>,<span class="number">100</span>,<span class="number">60</span>,math.pi/<span class="number">6</span>)</span><br><span class="line"><span class="keyword">print</span> x,y</span><br><span class="line"></span><br><span class="line">r = move(<span class="number">100</span>,<span class="number">100</span>,<span class="number">60</span>,math.pi/<span class="number">6</span>)</span><br><span class="line"><span class="keyword">print</span> r</span><br></pre></td></tr></table></figure></p>
<p>最终运行得到的结果是:</p>
<blockquote>
<p>151.961524227 130.0<br>(151.96152422706632, 130.0)</p>
</blockquote>
<h3 id="1-6-函数的参数"><a href="#1-6-函数的参数" class="headerlink" title="1.6 函数的参数 "></a>1.6 函数的参数 <span id="1.6"></span></h3><p>Python的函数定义非常简单，但灵活度却非常大。除了正常定义的必选参数外，还可以使用默认参数、可变参数和关键字参数，使得函数定义出来的接口，不但能处理复杂的参数，还可以简化调用者的代码。</p>
<h4 id="默认参数"><a href="#默认参数" class="headerlink" title="默认参数"></a>默认参数</h4><p>下面就以X的N次幂为例，介绍函数默认参数的用法:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">power</span><span class="params">(x,n=<span class="number">2</span>)</span>:</span></span><br><span class="line">	s = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> n&gt;<span class="number">0</span>:</span><br><span class="line">    	s = s*x</span><br><span class="line">        n = n <span class="number">-1</span></span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line">    </span><br><span class="line"><span class="keyword">print</span> <span class="string">'power(5) = '</span>,power(<span class="number">5</span>)</span><br><span class="line"><span class="keyword">print</span> <span class="string">'\npower(5,2) = '</span>,power(<span class="number">5</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure></p>
<p>当我们调用power(5)时，就相当调用了power(5,2)，最后运行的结果为:</p>
<blockquote>
<p>power(5) =  25</p>
<p>power(5,2) =  25</p>
</blockquote>
<p><strong>使用默认参数时的注意事项:</strong><br>第一，必选参数在前，默认参数在后，否则Python解释器会报错。<br>第二，当函数有多个参数时，把变化大的参数放前面，变化小的参数放后面。变化小的参数就可以作为默认参数。<br>第三，默认参数一定要指向不可变对象。</p>
<h4 id="可变参数"><a href="#可变参数" class="headerlink" title="可变参数"></a>可变参数</h4><p>可变参数，顾名思义就是函数中参数的个数是可变的，不固定的，可以是0个，1个，2个等等。</p>
<p><strong>可变参数的定义方法是:只要在函数的参数列表前加上一个星号*即可，例如: </strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calc</span><span class="params">(*numbers)</span>:</span></span><br><span class="line">	sum = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> numbers:</span><br><span class="line">    	sum += x*x</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line">    </span><br><span class="line"><span class="keyword">print</span> <span class="string">'calc(1,2) = '</span>,calc(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="keyword">print</span> <span class="string">'calc() = '</span>,calc()</span><br></pre></td></tr></table></figure></p>
<p>最后运行得到的结果是:</p>
<blockquote>
<p>calc(1,2) =  5<br>calc() =  0</p>
</blockquote>
<h4 id="关键字参数"><a href="#关键字参数" class="headerlink" title="关键字参数"></a>关键字参数</h4><p>可变参数允许你传入0个或任意个参数，这些可变参数在函数调用时自动组装为一个tuple。而关键字参数允许你传入0个或任意个<strong>含参数名的参数</strong>，这些关键字参数在函数内部自动组装为一个dict。关键字参数的定义: 在函数的形参前加上两个星号”**”，请看示例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">person</span><span class="params">(name,age,**kw)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'name:'</span>,name,<span class="string">'age:'</span>,age,<span class="string">'others:'</span>,kw</span><br></pre></td></tr></table></figure></p>
<p>函数person在被调用时可以只传入必选参数，也可以传入任意个数的关键字参数。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">person</span><span class="params">(name,age,**kw)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'name:'</span>,name,<span class="string">'age:'</span>,age,<span class="string">'others:'</span>,kw</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> person(<span class="string">'Bob'</span>,<span class="number">15</span>)</span><br><span class="line"><span class="keyword">print</span> person(<span class="string">'Adam'</span>,<span class="number">35</span>,job=<span class="string">'engineer'</span>,gender=<span class="string">'m'</span>)</span><br><span class="line"><span class="keyword">print</span> person(<span class="string">'Peter'</span>,<span class="number">20</span>,city=<span class="string">'ShangHai'</span>)</span><br></pre></td></tr></table></figure></p>
<p>运行的结果是:</p>
<blockquote>
<p>name: Bob age: 15 others: {}<br>None<br>name: Adam age: 35 others: {‘gender’: ‘m’, ‘job’: ‘engineer’}<br>None<br>name: Peter age: 20 others: {‘city’: ‘ShangHai’}<br>None</p>
</blockquote>
<p>在上面的运行结果中，含有空值“None”的输出的原因是函数person的默认返回值为None。</p>
<p>关键字参数有什么用？它可以扩展函数的功能。比如，在person函数里，我们保证能接收到name和age这两个参数，但是，如果调用者愿意提供更多的参数，我们也能收到。试想你正在做一个用户注册的功能，除了用户名和年龄是必填项外，其他都是可选项，利用关键字参数来定义这个函数就能满足注册的需求。</p>
<h4 id="参数的组合"><a href="#参数的组合" class="headerlink" title="参数的组合"></a>参数的组合</h4><p>在Python中定义函数，可以有必选参数、默认参数、可变参数和关键字参数，这4中参数可以一起使用，也可以使用其中的某一些，但是它们在函数参数列表中的定义的先后顺序必须是: 必选参数、默认参数、可变参数、关键字参数。</p>
<p>比如，定义一个函数包含上面的四种参数:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">def func(a,b,c=0,*args,**kw)</span><br><span class="line">	print 'a = ',a,'b = ',b,'c = ',c,'args = ',args,'kw = ',kw</span><br></pre></td></tr></table></figure></p>
<p>在函数调用时，Python解释器按照参数名和参数位置将参数传递进去<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(a,b,c=<span class="number">0</span>,*args,**kw)</span>:</span></span><br><span class="line">	<span class="keyword">print</span> <span class="string">'a=:'</span>,a,<span class="string">'b=:'</span>,b,<span class="string">'c='</span>,c,<span class="string">'args=:'</span>,args,<span class="string">'kw=:'</span>,kw</span><br><span class="line"></span><br><span class="line">func(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">func(<span class="number">1</span>,<span class="number">2</span>,c=<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">func(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="string">'a'</span>,<span class="string">'b'</span>)</span><br><span class="line"></span><br><span class="line">func(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="string">'a'</span>,<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">func(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="string">'a'</span>,<span class="string">'b'</span>,x=<span class="number">99</span>)</span><br></pre></td></tr></table></figure></p>
<p>最后运行得到的结果是:</p>
<blockquote>
<p>a=: 1 b=: 2 c= 0 args=: () kw=: {}<br>a=: 1 b=: 2 c= 3 args=: () kw=: {}<br>a=: 1 b=: 2 c= 3 args=: (‘a’, ‘b’) kw=: {}<br>a=: 1 b=: 2 c= 3 args=: (‘a’, 5) kw=: {}<br>a=: 1 b=: 2 c= 3 args=: (‘a’, ‘b’) kw=: {‘x’: 99}</p>
</blockquote>
<p>对于任意的函数都可以通过func(*args,**kw)的方式进行调用，无论它的函数参数定义是什么样的，例如:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">args = (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">kw = &#123;<span class="string">'x'</span>:<span class="number">99</span>&#125;</span><br><span class="line">func(*args,**kw)</span><br></pre></td></tr></table></figure>
<p>最后运行得到的结果是:</p>
<blockquote>
<p>a=: 1 b=: 2 c= 3 args=: (4,) kw=: {‘x’: 99}</p>
</blockquote>
<p>最后，特别要注意的是<br>*args是可变参数，接受的是一个tuple<br>**kw 是关键字参数，接受的是一个dict</p>
<p>可变参数既可以直接传入: func(1, 2, 3)，又可以先组装list或tuple，再通过*args传入: func(*(1, 2, 3))；</p>
<p>关键字参数既可以直接传入:func(a=1, b=2)，又可以先组装dict，再通过**kw传入: func(**{‘a’: 1, ‘b’: 2})。</p>
<p>使用*args和**kw是Python的习惯写法，当然也可以用其他参数名，但最好使用习惯用法。</p>
<h2 id="2-高级特性"><a href="#2-高级特性" class="headerlink" title="2. 高级特性 "></a>2. 高级特性 <span id="2"></span></h2><p>Python的设计思想就是简单，能够用一行代码解决的问题，绝对不用5行代码取解决，所以Python中就有许多非常简洁又非常方便地一些高级特性，下面就一一作个介绍。</p>
<h3 id="2-1-切片"><a href="#2-1-切片" class="headerlink" title="2.1 切片 "></a>2.1 切片 <span id="2.1"></span></h3><p>Python中可以通过切片操作非常方便地取出list或者tuple中的想要的元素，而不必很繁琐地通过索引和循环的方式来获取元素。</p>
<p>例如，我们取一个list中前3个元素，我们就可以用以下的一行语句来解决:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="string">'Michael'</span>,<span class="string">'Bob'</span>,<span class="string">'James'</span>,<span class="string">'Peter'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[<span class="number">0</span>:<span class="number">3</span>]</span><br></pre></td></tr></table></figure></p>
<p>L[0:3]表示从索引0开始取，直到索引3时结束，但是不包括索引3，所以最后取得元素是L[0],L[1],L[2]共三个元素。</p>
<p>其中L[0:3]也可以简写为L[:3]。</p>
<p>和取List的倒数索引类似，Python也支持倒数的切片方式，例如:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[<span class="number">-2</span>:<span class="number">-1</span>]</span><br><span class="line">[<span class="string">'James'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[<span class="number">-3</span>:<span class="number">-1</span>]</span><br><span class="line">[<span class="string">'Bob'</span>, <span class="string">'James'</span>]</span><br></pre></td></tr></table></figure></p>
<p>Python还支持每隔几个元素的切片操作，例如:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="string">'Michael'</span>, <span class="string">'Bob'</span>, <span class="string">'James'</span>, <span class="string">'Peter'</span>, <span class="string">'Fred'</span>, <span class="string">'Tom'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[::<span class="number">2</span>]</span><br><span class="line">[<span class="string">'Michael'</span>, <span class="string">'James'</span>, <span class="string">'Fred'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[<span class="number">0</span>:<span class="number">6</span>:<span class="number">3</span>]</span><br><span class="line">[<span class="string">'Michael'</span>, <span class="string">'Peter'</span>]</span><br></pre></td></tr></table></figure></p>
<p>其中L[0:6:3]表示的意思是从索引0开始取，每隔3个元素取一个元素，直到取到索引位置为6为止，但是不包括索引位置6。</p>
<p>对字符串同样可以采用切片操作，例如:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>str = <span class="string">'Hello World!'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str</span><br><span class="line"><span class="string">'Hello World!'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str[:<span class="number">6</span>]</span><br><span class="line"><span class="string">'Hello '</span></span><br></pre></td></tr></table></figure></p>
<h3 id="2-2-迭代"><a href="#2-2-迭代" class="headerlink" title="2.2 迭代 "></a>2.2 迭代 <span id="2.2"></span></h3><p>Python中的迭代是指: 能够通过for循环来遍历可迭代的对象，在Python中可以迭代的对象有list，tuple，dict，字符串等。</p>
<p>例如，dict类型对象的迭代方法如下所示:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">d = &#123;<span class="string">'a'</span>:<span class="number">1</span>,<span class="string">'b'</span>:<span class="number">2</span>,<span class="string">'c'</span>:<span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> d</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> d:</span><br><span class="line">    <span class="keyword">print</span> key</span><br></pre></td></tr></table></figure></p>
<p>最后运行得到的结果是:</p>
<blockquote>
<p>{‘a’: 1, ‘c’: 3, ‘b’: 2}<br>a<br>c<br>b</p>
</blockquote>
<p>因为dict的存储不是按照list的方式进行排列的，所以输出的结果可能不一样。</p>
<p>判断一个对象是不是可迭代的对象的方法是: 通过collections模块的iterable类型判断，例如:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections <span class="keyword">import</span> Iterable</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance(<span class="string">'abc'</span>,Iterable)</span><br><span class="line"><span class="keyword">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],Iterable)</span><br><span class="line"><span class="keyword">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance(<span class="number">123</span>,Iterable)</span><br><span class="line"><span class="keyword">False</span></span><br></pre></td></tr></table></figure></p>
<p>如果要对list实现类似Java那样的下标循环怎么办？Python内置的enumerate函数可以把一个list变成索引-元素对，这样就可以在for循环中同时迭代索引和元素本身:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i,value <span class="keyword">in</span> enumerate([<span class="string">'A'</span>,<span class="string">'B'</span>,<span class="string">'C'</span>]):</span><br><span class="line">	<span class="keyword">print</span> i,value</span><br></pre></td></tr></table></figure></p>
<p>最后运行得到的结果是:</p>
<blockquote>
<p>0 A<br>1 B<br>2 C</p>
</blockquote>
<h3 id="2-3-列表生成式"><a href="#2-3-列表生成式" class="headerlink" title="2.3 列表生成式 "></a>2.3 列表生成式 <span id="2.3"></span></h3><p>列表生成式即List Comprehensions，它是Python内置的非常简单却十分强大的List生成式。</p>
<p>按照前面所学习的知识，在生成List对象时，我们可能会直接初始化赋值给出List中的数据元素，也可能通过range函数来构造List，或者通过for循环和List的append函数来构造list，但是上面这些方法，都有些繁琐，在Python中就是怎么简单就怎么来，下面我们就通过列表生成式的例子来介绍列表生成式:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>[x*x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">11</span>)]</span><br><span class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>, <span class="number">36</span>, <span class="number">49</span>, <span class="number">64</span>, <span class="number">81</span>, <span class="number">100</span>]</span><br></pre></td></tr></table></figure></p>
<p>上面这个例子就给我们演示了生成1-10数字的x*x的方法，是不是很简单呢？</p>
<p><strong>写列表生成式时，首先要把生成的元素放在前面，后面再根for循环，就能创建出list了</strong></p>
<p>而且我们也可以通过列表生成式，开生成全排列，例如:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>[m+n <span class="keyword">for</span> m <span class="keyword">in</span> <span class="string">'ABC'</span> <span class="keyword">for</span> n <span class="keyword">in</span> <span class="string">'123'</span>]</span><br><span class="line">[<span class="string">'A1'</span>, <span class="string">'A2'</span>, <span class="string">'A3'</span>, <span class="string">'B1'</span>, <span class="string">'B2'</span>, <span class="string">'B3'</span>, <span class="string">'C1'</span>, <span class="string">'C2'</span>, <span class="string">'C3'</span>]</span><br></pre></td></tr></table></figure></p>
<p>列出当前目录下的所有文件和目录，我可以通过下面这一行简单的代码就能实现了:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> os</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[d <span class="keyword">for</span> d <span class="keyword">in</span> os.listdir(<span class="string">'.'</span>)]</span><br><span class="line">[<span class="string">'define_generator.pyc'</span>, <span class="string">'iteration_example.py~'</span>, <span class="string">'iteration_example.py'</span>, <span class="string">'fibonacci.py'</span>, <span class="string">'define_generator.py'</span>, <span class="string">'fibonacci.pyc'</span>]</span><br></pre></td></tr></table></figure></p>
<h3 id="2-4-生成器"><a href="#2-4-生成器" class="headerlink" title="2.4 生成器 "></a>2.4 生成器 <span id="2.4"></span></h3><p>通过列表生成式，我们可以直接创建一个列表。但是，受到内存限制，列表容量肯定是有限的。而且，创建一个包含100万个元素的列表，不仅占用很大的存储空间，如果我们仅仅需要访问前面几个元素，那后面绝大多数元素占用的空间都白白浪费了。</p>
<p>所以，如果列表元素可以按照某种算法推算出来，那我们是否可以在循环的过程中不断推算出后续的元素呢？这样就不必创建完整的list，从而节省大量的空间。在Python中，这种一边循环一边计算的机制，称为生成器（Generator）。</p>
<p>创建generator的方法有很多，第一种方法就是把生成式中的[]换成()就可以了，由此就能够生成一个generator，例如:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [x*x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>, <span class="number">36</span>, <span class="number">49</span>, <span class="number">64</span>, <span class="number">81</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g = (x*x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g</span><br><span class="line">&lt;generator object &lt;genexpr&gt; at <span class="number">0x7f425f70ecd0</span>&gt;</span><br></pre></td></tr></table></figure></p>
<p>list可以通过索引或者迭代的方式进行访问，那么如何访问generator中的元素呢？<br>前面讲到，generator的目的就是为了节约内存空间，它的元素不是全部一次性就计算出来的，而是通过保存了算法，然后根据算法一步一步地计算出来的。因此，generator中采用了next()方法来获取generator中的元素，例如:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>g.next()</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g.next()</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g.next()</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g.next()</span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g.next()</span><br><span class="line"><span class="number">16</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g.next()</span><br><span class="line"><span class="number">25</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g.next()</span><br><span class="line"><span class="number">36</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g.next()</span><br><span class="line"><span class="number">49</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g.next()</span><br><span class="line"><span class="number">64</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g.next()</span><br><span class="line"><span class="number">81</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g.next()</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">StopIteration</span><br></pre></td></tr></table></figure></p>
<p>当generator计算到最后一个元素之后，如果还继续调用next()方法，generator就会抛出一个StopIteration的错误。</p>
<p>但是上面这种调用generator的方法的确有些复杂，由于generator对象也是一个可迭代的对象，所以我们可以通过for循环来访问generator中的元素，例如:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>g = (x*x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> n <span class="keyword">in</span> g:</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> n</span><br><span class="line">...</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="number">16</span></span><br><span class="line"><span class="number">25</span></span><br><span class="line"><span class="number">36</span></span><br><span class="line"><span class="number">49</span></span><br><span class="line"><span class="number">64</span></span><br><span class="line"><span class="number">81</span></span><br></pre></td></tr></table></figure></p>
<p>创建generator的第二种方法就是: 如果一个函数定义中包含了yield关键字，那么这个函数就不在是一个普通函数，而是一个generator。</p>
<p>在这里最难理解的就是generator的执行顺序和函数的执行顺序不一样。函数是顺序执行，遇到return语句或者执行完函数的最后一行语句后返回。而变成generator的函数，在每次遇到next()的时候执行，遇到yield语句返回，再次执行时从上一次返回的yield语句处接下去继续执行，直到遇到函数体中的return语句或者执行到函数体的最后一行语句才停止，下面就举个简单的例子:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">odd</span><span class="params">()</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> <span class="string">'step 1'</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> <span class="string">'step 2'</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">yield</span> <span class="number">2</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> <span class="string">'step 3'</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">yield</span> <span class="number">3</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o = odd()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o.next()</span><br><span class="line">step <span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o.next()</span><br><span class="line">step <span class="number">2</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o.next()</span><br><span class="line">step <span class="number">3</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o.next()</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">StopIteration</span><br></pre></td></tr></table></figure></p>
<p>generator是非常强大的工具，在Python中，可以简单地把列表生成式改成generator，也可以通过函数实现复杂逻辑的generator。</p>
<h2 id="3-函数式编程"><a href="#3-函数式编程" class="headerlink" title="3. 函数式编程 "></a>3. 函数式编程 <span id="3"></span></h2><h3 id="3-1-高阶函数"><a href="#3-1-高阶函数" class="headerlink" title="3.1 高阶函数 "></a>3.1 高阶函数 <span id="3.1"></span></h3><p>变量可以指向函数，函数的参数又可以接受变量，所以当一个函数A可以接受另一个函数B作为参数时，我们就称函数A为高阶函数。例如，<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(x,y,f)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> f(x)+f(y)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> add(<span class="number">-10</span>,<span class="number">10</span>,abs)</span><br><span class="line"><span class="number">20</span></span><br></pre></td></tr></table></figure></p>
<p>上面的例子中，函数add就是一个高阶函数，它能够接受一个函数作为参数。</p>
<p><strong>把函数当做参数传入到另外一个函数中，这样的函数就称为高阶函数。</strong></p>
<h4 id="map-reduce高阶函数的用法"><a href="#map-reduce高阶函数的用法" class="headerlink" title="map/reduce高阶函数的用法"></a>map/reduce高阶函数的用法</h4><p>Python中内建了map()和reduce()函数，有关Map/Reduce的概念，请详见google的一片论文，<a href="https://research.google.com/archive/mapreduce.html" target="_blank" rel="external">MapReduce: Simplified Data Processing on Large Clusters</a></p>
<h5 id="map"><a href="#map" class="headerlink" title="map"></a>map</h5><p>map函数接收两个参数，一个是函数，一个是序列，map将接收到的函数依次作用于序列中的每个元素，并把结果作为新的list返回，例如:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> x*x</span><br><span class="line"><span class="meta">... </span>    </span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>map(f,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>]</span><br></pre></td></tr></table></figure></p>
<p>所以，map作为高阶函数，它把计算规则抽象化了，因此，我们不仅可以计算简单的f(x)=x*x，而且还可以计算更为复杂的函数。</p>
<h5 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h5><p>reduce把一个函数作用在一个序列[x1,x2,x3…]上，<strong>这个函数必须接收两个参数</strong>，reduce将计算得到的结果再与序列中的下一个元素做累计计算，其效果就是:</p>
<blockquote>
<p>reduce(f,[x1,x2,x3,x4])=f(f(f(x1,x2),x3),x4)</p>
</blockquote>
<p>例如，一个序列求和就可以通过reduce实现<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(x,y)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> x+y</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>reduce(add,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line"><span class="number">15</span></span><br></pre></td></tr></table></figure></p>
<p>在介绍完，map和reduce的用法之后，我们就给出一个两者混合使用的例子: 将字符串形式表示的整数转换成整数。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">fn</span><span class="params">(x,y)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> x*<span class="number">10</span>+y</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">num2int</span><span class="params">(s)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> &#123;<span class="string">'0'</span>:<span class="number">0</span>, <span class="string">'1'</span>: <span class="number">1</span>, <span class="string">'2'</span>: <span class="number">2</span>, <span class="string">'3'</span>: <span class="number">3</span>, <span class="string">'4'</span>: <span class="number">4</span>, <span class="string">'5'</span>: <span class="number">5</span>, <span class="string">'6'</span>: <span class="number">6</span>, <span class="string">'7'</span>: <span class="number">7</span>, <span class="string">'8'</span>: <span class="number">8</span>, <span class="string">'9'</span>: <span class="number">9</span>&#125;[s]</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>reduce(fn,map(num2int,<span class="string">'13579'</span>))</span><br><span class="line"><span class="number">13579</span></span><br></pre></td></tr></table></figure></p>
<h5 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h5><p>利用map()函数，把用户输入的不规范的英文名字，变为首字母大写，其他小写的规范名字。输入: [‘adam’, ‘LISA’, ‘barT’]，输出: [‘Adam’, ‘Lisa’, ‘Bart’]。</p>
<p>解答:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">name_format</span><span class="params">(s)</span>:</span></span><br><span class="line">	s = s.lower()</span><br><span class="line">	s = s.capitalize()</span><br><span class="line">	<span class="keyword">return</span> s</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> map(name_format,[<span class="string">'adam'</span>,<span class="string">'LISA'</span>,<span class="string">'barT'</span>])</span><br></pre></td></tr></table></figure></p>
<h4 id="filter高阶函数的用法"><a href="#filter高阶函数的用法" class="headerlink" title="filter高阶函数的用法"></a>filter高阶函数的用法</h4><p>Python内建的filter函数用于过滤序列。和map()相似，filter()也接受一个函数和一个序列共两个参数，但和map()不同的是，filter()依次把函数作用于序列中每个元素，然后根据返回值是True还是False来保留还是丢弃该元素。</p>
<p>例如，在一个list中删除掉其中的偶数，那么这就可以这么写:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_odd</span><span class="params">(x)</span>:</span></span><br><span class="line">	<span class="keyword">return</span> x%<span class="number">2</span> == <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> filter(is_odd,[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>])</span><br></pre></td></tr></table></figure></p>
<p>最后运行得到的结果是:</p>
<blockquote>
<p>[1, 3, 5, 7, 9]</p>
</blockquote>
<p>如果is_odd()得到的结果是True，那么则保留该元素，如果is_odd()得到的函数是False，那么则删除该元素。</p>
<h5 id="练习-1"><a href="#练习-1" class="headerlink" title="练习"></a>练习</h5><p>请尝试使用filter()删除1-100之间的素数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">filter_prime_number</span><span class="params">(x)</span>:</span></span><br><span class="line">	i = <span class="number">2</span></span><br><span class="line">	n = (int)(math.sqrt(x))</span><br><span class="line">	<span class="keyword">while</span> i &lt;= n:</span><br><span class="line">		<span class="keyword">if</span> x % i == <span class="number">0</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">		i = i + <span class="number">1</span></span><br><span class="line">	<span class="keyword">if</span> i &gt; n:</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> filter(filter_prime_number,range(<span class="number">1</span>,<span class="number">101</span>))</span><br></pre></td></tr></table></figure>
<p>运行得到的结果是:</p>
<blockquote>
<p>[4, 6, 8, 9, 10, 12, 14, 15, 16, 18, 20, 21, 22, 24, 25, 26, 27, 28, 30, 32, 33, 34, 35, 36, 38, 39, 40, 42, 44, 45, 46, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 60, 62, 63, 64, 65, 66, 68, 69, 70, 72, 74, 75, 76, 77, 78, 80, 81, 82, 84, 85, 86, 87, 88, 90, 91, 92, 93, 94, 95, 96, 98, 99, 100]</p>
</blockquote>
<h4 id="sorted排序函数"><a href="#sorted排序函数" class="headerlink" title="sorted排序函数"></a>sorted排序函数</h4><p>Python内置的sorted()函数能够对list进行排序，例如:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>sorted([<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>])</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br></pre></td></tr></table></figure></p>
<p>同时sorted函数还是一个高阶函数，它还能够接收一个比较函数来实现自定义排序的功能。</p>
<p>例如，我们想实现一个排倒序的功能，那么我们可以自定义一个排倒序的比较函数，然后将这个函数传递到sorted函数中:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">reversed_cmp</span><span class="params">(x,y)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">if</span> x &lt; y:</span><br><span class="line"><span class="meta">... </span>            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">if</span> x &gt; y:</span><br><span class="line"><span class="meta">... </span>            <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sorted([<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>],reversed_cmp)</span><br><span class="line">[<span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="3-2-返回函数"><a href="#3-2-返回函数" class="headerlink" title="3.2 返回函数 "></a>3.2 返回函数 <span id="3.2"></span></h3><p>函数除了可以作为另外一个函数的参数之外，还可以作为函数的返回值。</p>
<p>下面就以一个求和函数为例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">lazy_sum</span><span class="params">(*args)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">sum</span><span class="params">()</span>:</span></span><br><span class="line"><span class="meta">... </span>        ax = <span class="number">0</span></span><br><span class="line"><span class="meta">... </span>        <span class="keyword">for</span> n <span class="keyword">in</span> args:</span><br><span class="line"><span class="meta">... </span>            ax = ax + n</span><br><span class="line"><span class="meta">... </span>        <span class="keyword">return</span> ax</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> sum</span><br></pre></td></tr></table></figure></p>
<p>当我们调用lazy_sum()时，返回的不是最后计算得到的数值，而是一个函数对象<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = lazy_sum(<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f</span><br><span class="line">&lt;function sum at <span class="number">0x7f55b35b96e0</span>&gt;</span><br></pre></td></tr></table></figure></p>
<p>只有再调用函数f()之后才能得到求和的结果:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f()</span><br><span class="line"><span class="number">25</span></span><br></pre></td></tr></table></figure></p>
<p>在这个例子中，我们在lazy_sum()函数中还定义了一个sum()函数，并且内部函数sum还引用了外部函数lazy_sum函数中的参数和局部变量，当lazy_sum函数返回函数sum时 ，相关参数和局部变量都保存在返回函数值中，这种程序成为“闭包”。</p>
<h5 id="闭包的使用"><a href="#闭包的使用" class="headerlink" title="闭包的使用"></a>闭包的使用</h5><p>闭包的使用虽然简单，但是它有许多需要注意的地方，下面就举个例子:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">count</span><span class="params">()</span>:</span></span><br><span class="line"><span class="meta">... </span>    fs = []</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">4</span>):</span><br><span class="line"><span class="meta">... </span>            <span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">()</span>:</span></span><br><span class="line"><span class="meta">... </span>                <span class="keyword">return</span> i*i</span><br><span class="line"><span class="meta">... </span>            fs.append(f)</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> fs</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f1,f2,f3 = count()</span><br></pre></td></tr></table></figure></p>
<p>在上面例子中，每次循环都建立了一个新的函数，然后将3个函数都通过列表的形式返回了。</p>
<p>你可能认为，三个函数的执行结果分别是1,4,9，但是实际的运行结果则是:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f1()</span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f2()</span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f3()</span><br><span class="line"><span class="number">9</span></span><br></pre></td></tr></table></figure></p>
<p>三个函数的运行结果全部都是9！这是因为函数f在定义中引用了局部变量i，并且函数f并不是立即运行。等到三个函数都返回时，保存在返回函数中的局部变量i的值已经都变成了3，因此最终的结果都是9。</p>
<p><strong>所以在返回闭包时一定要注意，千万不要在返回的函数中使用循环中的变量，或者后续会发生变化的变量</strong></p>
<p>如果一定要引用循环变量怎么办？方法是再创建一个函数，用该函数的参数绑定循环变量当前的值，无论该循环变量后续如何更改，已绑定到函数参数的值不变:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">count</span><span class="params">()</span>:</span></span><br><span class="line"><span class="meta">... </span>    fs=[]</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">4</span>):</span><br><span class="line"><span class="meta">... </span>        <span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(j)</span>:</span></span><br><span class="line"><span class="meta">... </span>            <span class="function"><span class="keyword">def</span> <span class="title">g</span><span class="params">()</span>:</span></span><br><span class="line"><span class="meta">... </span>                <span class="keyword">return</span> j*j</span><br><span class="line"><span class="meta">... </span>            <span class="keyword">return</span> g</span><br><span class="line"><span class="meta">... </span>        fs.append(f(i))</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> fs</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f1()</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f2()</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f3()</span><br><span class="line"><span class="number">9</span></span><br></pre></td></tr></table></figure></p>
<h3 id="3-3-匿名函数"><a href="#3-3-匿名函数" class="headerlink" title="3.3 匿名函数 "></a>3.3 匿名函数 <span id="3.3"></span></h3><p>当我们在传入函数时，有些时候我们可以不用显示地定义一个函数，而直接传入匿名函数更为方便。</p>
<p>以map()函数为例，计算f(x)=x*x时，除了定义一个f(x)之外，还可以直接传入匿名函数:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>map(<span class="keyword">lambda</span> x:x*x,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>]</span><br></pre></td></tr></table></figure></p>
<p>通过对比可以知道，lambda x:x*x实际上等效于:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x)</span>:</span></span><br><span class="line">	<span class="keyword">return</span> x*x</span><br></pre></td></tr></table></figure></p>
<p>从上面的例子中，我们可以总结一下匿名函数的定义形式:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">lambda</span> 形参:返回值表达式</span><br></pre></td></tr></table></figure></p>
<p>其中关键字<strong>lambda</strong>表示匿名函数，冒号前面是形参，冒号后面就是返回值表达式。但是从上面的匿名函数定义形式我们就可以看出，匿名函数有个限制，就是它的返回值只能有一个，因为冒号后面只允许有一个返回值表达式。</p>
<p>用匿名函数有一个好处，因为没有函数名，就不存在函数名冲突。此外，匿名函数还是一个函数对象，还可以将匿名函数对象赋值给一个变量，然后就可以通过该变量来调用该函数，例如:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = <span class="keyword">lambda</span> x:x*x</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f</span><br><span class="line">&lt;function &lt;<span class="keyword">lambda</span>&gt; at <span class="number">0x7f55b35b98c0</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f(<span class="number">5</span>)</span><br><span class="line"><span class="number">25</span></span><br></pre></td></tr></table></figure></p>
<p>同样，匿名函数也可以作为返回值返回。</p>
<h3 id="3-4-decorator函数（装饰器）"><a href="#3-4-decorator函数（装饰器）" class="headerlink" title="3.4 decorator函数（装饰器） "></a>3.4 decorator函数（装饰器） <span id="3.4"></span></h3><p>函数对象有一个<strong>name</strong>属性，可以拿到函数的名字:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">now</span><span class="params">()</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> <span class="string">'2015-07-20'</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>now._name_</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">AttributeError: <span class="string">'function'</span> object has no attribute <span class="string">'_name_'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>now.__name__</span><br><span class="line"><span class="string">'now'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g = now</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g.__name__</span><br><span class="line"><span class="string">'now'</span></span><br></pre></td></tr></table></figure></p>
<p>在这里要注意一点: “__name__“属性中“name”前面和后面均有<strong>两个英文下划线</strong>。</p>
<p>现在，如果我们要增强now()函数的功能，比如，在函数调用前自动打印日志，但又不希望修改原来now()函数的定义，这种在代码运行期间动态增加功能的方式，称之为”装饰器“(Decorator)。</p>
<p>本质上，decorator就是一个返回函数的高阶函数。所以，我们要定义一个能打印日志的decorator，可定义如下:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(func)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args,**kw)</span>:</span></span><br><span class="line"><span class="meta">... </span>        <span class="keyword">print</span> <span class="string">'call %s():'</span>%(func.__name__)</span><br><span class="line"><span class="meta">... </span>        <span class="keyword">return</span> func(*args,**kw)</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> wrapper</span><br></pre></td></tr></table></figure></p>
<p>观察上面的log，因它是一个decorator，所以接受一个函数作为参数，并返回一个函数。我们需要借助Python中的@语法，把decorator置于函数的定义处:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@log</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">now</span><span class="params">()</span>:</span></span><br><span class="line">	<span class="keyword">print</span> <span class="string">'2015-07-20'</span></span><br></pre></td></tr></table></figure></p>
<p>把@log放在now()函数的定义处，相当于执行了语句:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">now = log(now)</span><br></pre></td></tr></table></figure></p>
<p>下面，我们就对上述的过程进行一个分析:<br><img src="http://7xj51c.com1.z0.glb.clouddn.com/decorator_analysis_process.png" alt="decorator_analysis_process"></p>
<p>如果decorator需要传入参数，那就需要编写一个返回decorator的高阶函数，例如:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(text)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decorator</span><span class="params">(func)</span>:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args, **kw)</span>:</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">'%s %s():'</span> % (text, func.__name__)</span><br><span class="line">            <span class="keyword">return</span> func(*args, **kw)</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line">    <span class="keyword">return</span> decorator</span><br></pre></td></tr></table></figure></p>
<p>运行的结果是:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>now()</span><br><span class="line">execute now():</span><br><span class="line"><span class="number">2013</span><span class="number">-12</span><span class="number">-25</span></span><br></pre></td></tr></table></figure></p>
<p>上面的语句的执行效果等效于:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>now = log(<span class="string">'execute'</span>)(now)</span><br></pre></td></tr></table></figure></p>
<p>整个执行的过程，如下图所示:<br><img src="http://7xj51c.com1.z0.glb.clouddn.com/decorator_analysis_process2.png" alt="decorator_analysis_process2"></p>
<p>以上两种decorator的定义都没有问题，但还差最后一步。因为我们讲了函数也是对象，它有<strong>name</strong>等属性，但你去看经过decorator装饰之后的函数，它们的<strong>name</strong>已经从原来的’now’变成了’wrapper’:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>now.__name__</span><br><span class="line"><span class="string">'wrapper'</span></span><br></pre></td></tr></table></figure></p>
<p>因为返回的那个wrapper()函数名字就是’wrapper’，所以，需要把原始函数的__name__等属性复制到wrapper()函数中，否则，有些依赖函数签名的代码执行就会出错。</p>
<p>不需要编写 wrapper.<strong>name</strong> = func.<strong>name</strong> 这样的代码，因为Python内置的functools.wraps就是干这事的，所以一个完整的decorator的写法如下:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(func)</span>:</span></span><br><span class="line"><span class="meta">    @functools.wraps(func)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args, **kw)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'call %s():'</span> % func.__name__</span><br><span class="line">        <span class="keyword">return</span> func(*args, **kw)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br></pre></td></tr></table></figure></p>
<p>或者是带参数的decorator<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(text)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decorator</span><span class="params">(func)</span>:</span></span><br><span class="line"><span class="meta">        @functools.wraps(func)</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args, **kw)</span>:</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">'%s %s():'</span> % (text, func.__name__)</span><br><span class="line">            <span class="keyword">return</span> func(*args, **kw)</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line">    <span class="keyword">return</span> decorator</span><br><span class="line"></span><br><span class="line"><span class="meta">@log('execute')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">now</span><span class="params">()</span>:</span></span><br><span class="line">	<span class="keyword">print</span> <span class="string">'2015-07-20'</span></span><br><span class="line"></span><br><span class="line">now()</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">'now.__name__: %s'</span> % now.__name__</span><br></pre></td></tr></table></figure></p>
<p>后者运行的结果为:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">execute now():</span><br><span class="line"><span class="number">2015</span><span class="number">-07</span><span class="number">-20</span></span><br><span class="line">now.__name__: now</span><br></pre></td></tr></table></figure></p>
<p><strong>import functools</strong>是导入functools模块。</p>
<p>请编写一个decorator，能在函数调用的前后打印出’begin call’和’end call’的日志。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(func)</span>:</span></span><br><span class="line"><span class="meta">    @functools.wraps(func)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args, **kw)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'%s %s():'</span> % (<span class="string">'begin call'</span>, func.__name__)</span><br><span class="line">        func(*args, **kw)</span><br><span class="line">	<span class="keyword">print</span> <span class="string">'%s %s():'</span> % (<span class="string">'end call'</span>, func.__name__)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@log</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">now</span><span class="params">()</span>:</span></span><br><span class="line">	<span class="keyword">print</span> <span class="string">'2015-07-20'</span></span><br><span class="line"></span><br><span class="line">now()</span><br></pre></td></tr></table></figure></p>
<p>运行得到的结果:</p>
<blockquote>
<p>begin call now():<br>2015-07-20<br>end call now():<br>now.<strong>name</strong>: now</p>
</blockquote>
<p>编写一个@log的decorator，使它既支持:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@log</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">()</span>:</span></span><br><span class="line">	<span class="keyword">pass</span></span><br></pre></td></tr></table></figure></p>
<p>又支持:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@log('execute')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">()</span>:</span></span><br><span class="line">	<span class="keyword">pass</span></span><br></pre></td></tr></table></figure></p>
<p>从上面这个需求分析，我们可以采用默认参数的方法来解决上面这个问题:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(text=None)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decorator</span><span class="params">(func)</span>:</span></span><br><span class="line"><span class="meta">        @functools.wraps(func)</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args, **kw)</span>:</span></span><br><span class="line">			<span class="keyword">if</span> text == <span class="keyword">None</span>:</span><br><span class="line">				<span class="keyword">print</span> <span class="string">'%s():'</span> % (func.__name__)</span><br><span class="line">			<span class="keyword">else</span>:</span><br><span class="line">				<span class="keyword">print</span> <span class="string">'%s %s():'</span> % (text, func.__name__)</span><br><span class="line">			<span class="keyword">return</span> func(*args,**kw)</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line">    <span class="keyword">return</span> decorator</span><br><span class="line"></span><br><span class="line"><span class="meta">@log('execute')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">now</span><span class="params">()</span>:</span></span><br><span class="line">	<span class="keyword">print</span> <span class="string">'2015-07-20-now()'</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@log()</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">now1</span><span class="params">()</span>:</span></span><br><span class="line">	<span class="keyword">print</span> <span class="string">'2015-07-20-now1()'</span></span><br><span class="line"></span><br><span class="line">now()</span><br><span class="line"></span><br><span class="line">now1()</span><br></pre></td></tr></table></figure></p>
<p>上面运行的结果是:</p>
<blockquote>
<p>execute now():<br>2015-07-20-now()<br>now1():<br>2015-07-20-now1()</p>
</blockquote>
<h3 id="3-5-偏函数"><a href="#3-5-偏函数" class="headerlink" title="3.5 偏函数 "></a>3.5 偏函数 <span id="3.5"></span></h3><p>Python中的functools模块提供了许多有用的功能，其中一个就是偏函数(Partial Function)。要注意这里的偏函数和数学上的偏函数的意义不一样。</p>
<p>下面就以int()函数为例，来介绍偏函数。</p>
<p>int()函数的功能是将字符串形式的整数转换成整型的整数形式，例如:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>int(<span class="string">'12345'</span>)</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure></p>
<p>但是int()还提供了额外的参数base，默认值为10。如果传入base的参数为N，那么int()就可以作N进制的转换。例如:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>int(<span class="string">'123'</span>,base=<span class="number">8</span>)</span><br><span class="line"><span class="number">83</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int(<span class="string">'10000000'</span>,base=<span class="number">2</span>)</span><br><span class="line"><span class="number">128</span></span><br></pre></td></tr></table></figure></p>
<p>假设要转换大量的二进制字符串，每次都传入int(x, base=2)非常麻烦，于是，我们想到，可以定义一个int2()的函数，默认把base=2传进去:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">int2</span><span class="params">(x)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> int(x,base=<span class="number">2</span>)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int2(<span class="string">'1000'</span>)</span><br><span class="line"><span class="number">8</span></span><br></pre></td></tr></table></figure></p>
<p>functools.partial就是帮助我们创建一个偏函数的，不需要我们自己定义int2()，可以直接使用下面的代码创建一个新的函数int2:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> functools</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int2 = functools.partial(int,base=<span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int2(<span class="string">'1000'</span>)</span><br><span class="line"><span class="number">8</span></span><br></pre></td></tr></table></figure></p>
<p>简单总结一下functools.partial的作用就是将函数中的一些参数固定（将参数设置为默认值），然后返回一个新函数，通过这个函数进行调用就会变得非常简单。当函数的参数个数太多，需要简化时，使用functools.partial可以创建一个新的函数，这个新函数可以固定住原函数的部分参数，从而在调用时更简单。</p>

      
    </div>

    <div>
      
        
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Python/" rel="tag">#Python</a>
          
            <a href="/tags/学习/" rel="tag">#学习</a>
          
            <a href="/tags/笔记/" rel="tag">#笔记</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/07/16/Python2-学习笔记（1）/" rel="next" title="Python 学习笔记（1）">
                <i class="fa fa-chevron-left"></i> Python 学习笔记（1）
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/07/23/Python学习笔记（3）/" rel="prev" title="Python学习笔记（3）">
                Python学习笔记（3） <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
  <a class="jiathis_button_tsina"></a>
  <a class="jiathis_button_tqq"></a>
  <a class="jiathis_button_weixin"></a>
  <a class="jiathis_button_cqq"></a>
  <a class="jiathis_button_douban"></a>
  <a class="jiathis_button_renren"></a>
  <a class="jiathis_button_qzone"></a>
  <a class="jiathis_button_kaixin001"></a>
  <a class="jiathis_button_copy"></a>
  <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
  <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
  var jiathis_config={
    hideMore:false
  }
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2015/07/20/Python学习笔记（2）/"
           data-title="Python 学习笔记（2）" data-url="http://woshijpf.github.io/2015/07/20/Python学习笔记（2）/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://7xj51c.com1.z0.glb.clouddn.com/%E5%A4%9A%E6%9D%A5A%E6%A2%A62.png"
               alt="woshijpf" />
          <p class="site-author-name" itemprop="name">woshijpf</p>
          <p class="site-description motion-element" itemprop="description">Talk is cheap show me the code</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">11</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>
          
          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/woshijpf" target="_blank">
                  
                    <i class="fa fa-github"></i> GitHub
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/jiang-peng-fei-24" target="_blank">
                  
                    <i class="fa fa-globe"></i> 知乎
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.douban.com/people/56692971/" target="_blank">
                  
                    <i class="fa fa-globe"></i> 豆瓣
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/2434965031/profile?rightmod=1&wvr=6&mod=personinfo&is_all=1" target="_blank">
                  
                    <i class="fa fa-weibo"></i> Weibo
                  
                </a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator">
            <i class="fa fa-angle-double-up"></i>
          </div>
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#目录"><span class="nav-number">1.</span> <span class="nav-text">目录</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-函数"><span class="nav-number"></span> <span class="nav-text">1. 函数 </span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-函数调用"><span class="nav-number">1.</span> <span class="nav-text">.1 函数调用 </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-函数定义"><span class="nav-number">2.</span> <span class="nav-text">1.2 函数定义 </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-空函数"><span class="nav-number">3.</span> <span class="nav-text">1.3 空函数 </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4-参数检查"><span class="nav-number">4.</span> <span class="nav-text">1.4 参数检查 </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-5-返回多个返回值"><span class="nav-number">5.</span> <span class="nav-text">1.5 返回多个返回值 </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-6-函数的参数"><span class="nav-number">6.</span> <span class="nav-text">1.6 函数的参数 </span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#默认参数"><span class="nav-number">6.1.</span> <span class="nav-text">默认参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#可变参数"><span class="nav-number">6.2.</span> <span class="nav-text">可变参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#关键字参数"><span class="nav-number">6.3.</span> <span class="nav-text">关键字参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#参数的组合"><span class="nav-number">6.4.</span> <span class="nav-text">参数的组合</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-高级特性"><span class="nav-number"></span> <span class="nav-text">2. 高级特性 </span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-切片"><span class="nav-number">1.</span> <span class="nav-text">2.1 切片 </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-迭代"><span class="nav-number">2.</span> <span class="nav-text">2.2 迭代 </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-列表生成式"><span class="nav-number">3.</span> <span class="nav-text">2.3 列表生成式 </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-生成器"><span class="nav-number">4.</span> <span class="nav-text">2.4 生成器 </span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-函数式编程"><span class="nav-number"></span> <span class="nav-text">3. 函数式编程 </span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-高阶函数"><span class="nav-number">1.</span> <span class="nav-text">3.1 高阶函数 </span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#map-reduce高阶函数的用法"><span class="nav-number">1.1.</span> <span class="nav-text">map/reduce高阶函数的用法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#map"><span class="nav-number">1.1.1.</span> <span class="nav-text">map</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#reduce"><span class="nav-number">1.1.2.</span> <span class="nav-text">reduce</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#练习"><span class="nav-number">1.1.3.</span> <span class="nav-text">练习</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#filter高阶函数的用法"><span class="nav-number">1.2.</span> <span class="nav-text">filter高阶函数的用法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#练习-1"><span class="nav-number">1.2.1.</span> <span class="nav-text">练习</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sorted排序函数"><span class="nav-number">1.3.</span> <span class="nav-text">sorted排序函数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-返回函数"><span class="nav-number">2.</span> <span class="nav-text">3.2 返回函数 </span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#闭包的使用"><span class="nav-number">2.0.1.</span> <span class="nav-text">闭包的使用</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-匿名函数"><span class="nav-number">3.</span> <span class="nav-text">3.3 匿名函数 </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-decorator函数（装饰器）"><span class="nav-number">4.</span> <span class="nav-text">3.4 decorator函数（装饰器） </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-偏函数"><span class="nav-number">5.</span> <span class="nav-text">3.5 偏函数 </span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator">
            <i class="fa fa-angle-double-down"></i>
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">woshijpf</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

本站总访问量 <span id="busuanzi_value_site_pv"></span> &nbsp&nbsp&nbsp
您是第<span id="busuanzi_value_site_uv"></span>个来到的小伙伴



      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  


  




<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=0.5.0"></script>



  
  
<script type="text/javascript" src="/js/src/scrollspy.js?v=0.5.0"></script>

<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 1 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = NexT.utils.escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    NexT.motion.middleWares.sidebar = function () {
      var $tocContent = $('.post-toc-content');

      if (CONFIG.scheme !== 'Pisces' && (CONFIG.sidebar.display === 'post' || CONFIG.sidebar.display === 'always')) {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          NexT.utils.displaySidebar();
        }
      }
    };
  });
</script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"woshijpf"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>

  
    <script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/MathJax.js"></script>
    <script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/config/TeX-AMS-MML_HTMLorMML.js"></script>
  


  


</body>
</html>
